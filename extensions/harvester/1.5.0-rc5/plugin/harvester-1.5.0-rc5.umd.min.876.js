(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_5_0_rc5"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_5_0_rc5"]||[]).push([[876],{50933:function(e,t,r){"use strict";r.d(t,{A:function(){return m}});var a=r(9274);const o=["aria-label"],s=["alt"];function n(e,t,r,n,c,i){return r.text?((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,class:(0,a.normalizeClass)(["copy-to-clipboard-text",{copied:c.copied,plain:r.plain}]),role:"button","aria-label":e.t("generic.copyToClipboard"),href:"#",onClick:t[0]||(t[0]=(...e)=>i.clicked&&i.clicked(...e)),onKeyup:t[1]||(t[1]=(0,a.withKeys)(((...e)=>i.clicked&&i.clicked(...e)),["space"]))},[(0,a.createTextVNode)((0,a.toDisplayString)(r.text)+" ",1),(0,a.createElementVNode)("i",{class:(0,a.normalizeClass)(["icon",{"icon-copy":!c.copied,"icon-checkmark":c.copied}]),alt:c.copied?e.t("generic.copiedToClipboard"):e.t("generic.copyToClipboard")},null,10,s)],42,o)):(0,a.createCommentVNode)("",!0)}var c=r(60729),i=r(26953),l={emits:["error"],props:{text:{type:String,required:!0},plain:{type:Boolean,default:!1}},data(){return{copied:!1}},methods:{clicked(e){this.copied||(e.preventDefault(),(0,c.e)(this.text).then((()=>{this.copied=!0;let t=e.target;"I"===t.tagName&&(t=t.parentElement||t),setTimeout((()=>{this.copied=!1}),500)})).catch((e=>{this.$emit("error",(0,i.rz)(e))})))}}},u=(r(98586),r(47433));const d=(0,u.A)(l,[["render",n],["__scopeId","data-v-bed9eff4"]]);var m=d},14290:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={class:"precent-data"},s={class:"ml-10 percentage"},n={key:0,class:"mt-10"},c={class:"precent-data"},i={class:"ml-10 percentage"};function l(e,t,r,l,u,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.reserved,units:d.cpuUnits,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",o,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",s,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.cpuTotal,used:d.used,units:d.cpuUnits},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",i,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units"])])):(0,a.createCommentVNode)("",!0)])}var u=r(95912),d=r(20665),m=r(49844),p={name:"HarvesterCpuUsed",components:{ConsumptionGauge:u.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUnits(){return"C"},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.cpuReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.cpu||"0m"):0}}},h=(r(96782),r(47433));const g=(0,h.A)(p,[["render",l],["__scopeId","data-v-6c8e8046"]]);var f=g},24423:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(9274);const o={key:0};function s(e,t,r,s,n,c){const i=(0,a.resolveComponent)("CopyToClipboardText"),l=(0,a.resolveDirective)("clean-tooltip");return c.showIP?((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(c.ips,(({ip:e,name:t})=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e},[(0,a.withDirectives)((0,a.createVNode)(i,{text:e},null,8,["text"]),[[l,t]])])))),128))])):(0,a.createCommentVNode)("",!0)}var n=r(92590),c=r(41594),i=r(2602),l=r(50933),u=r(32766),d=r(48249),m=r(50784),p={components:{CopyToClipboardText:l.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},col:{type:Object,default:()=>{}}},data(){return{inStore:"harvester"}},created(){const e=this.$store.getters["currentProduct"].inStore;this.inStore=e},computed:{ips(){return[...this.vmiIp,...this.networkAnnotationIP].filter(Boolean).sort(((e,t)=>e.ip<t.ip?-1:1))},networkAnnotationIP(){if("Running"!==this.row.actualState)return[];const e=(0,n.Jt)(this.row,`metadata.annotations."${i.r.NETWORK_IPS}"`)||"[]";try{const t=JSON.parse(e);return t.map((e=>({ip:e.replace(/\/[\d\D]*/,""),name:""})))}catch(t){return[]}},vmiIp(){const e=this.$store.getters[`${this.inStore}/all`](u.rk.VMI),t=e.find((e=>e.id===this.value))||null,r=this.row.networksName||[],a=t?.spec?.networks||[];return(t?.status?.interfaces||[]).filter((e=>(0,c.eH)(e.ipAddress)&&r.includes(e.name))).map((e=>{let t;const r=a.find((t=>t.name===e.name));return r&&r.multus?t=r.multus.networkName:r&&r.pod&&(t=d.PO),{ip:e.ipAddress,name:t}}))},showIP(){return this.row.stateDisplay!==m.OFF}}},h=r(47433);const g=(0,h.A)(p,[["render",s]]);var f=g},79898:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const o={class:"precent-data"},s={class:"ml-10 percentage"},n={key:0,class:"mt-10"},c={class:"precent-data"},i={class:"ml-10 percentage"};function l(e,t,r,l,u,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.reserved,units:d.memoryUnits,"number-formatter":d.memoryFormatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.reserved")),1),(0,a.createElementVNode)("span",o,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",s,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"]),r.showUsed?((0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createVNode)(m,{capacity:d.memoryTotal,used:d.used,units:d.memoryUnits,"number-formatter":d.memoryFormatter},{title:(0,a.withCtx)((({amountTemplateValues:t,formattedPercentage:r})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.formatters.hardwareResourceGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",t))+" ",1),(0,a.createElementVNode)("span",i,"/ "+(0,a.toDisplayString)(r),1)])])),_:1},8,["capacity","used","units","number-formatter"])])):(0,a.createCommentVNode)("",!0)])}var u=r(95912),d=r(20665),m=r(49844),p=r(84757),h={name:"HarvesterMemoryUsed",components:{ConsumptionGauge:u.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showUsed:{type:Boolean,default:!1}},data(){return{}},computed:{metrics(){return this.$store.getters["harvester/byId"](d.$v.NODE,this.row.id)},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUnits(){const e=(0,m.$W)(this.memoryTotal,1024);return`${m.QN[e]}${p.jx}`},node(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](d.NW,this.row.id);return t},reserved(){return this.metrics?this.node.memoryReserved:0},used(){return this.metrics?(0,m.ao)(this.metrics?.usage?.memory||"0m",{increment:1024}):0}},methods:{memoryFormatter(e){const t=(0,m.$W)(this.memoryTotal,1024),r={addSuffix:!1,increment:1024,minExponent:t};return(0,m.Mo)(e,r)}}},g=(r(93829),r(47433));const f=(0,g.A)(h,[["render",l],["__scopeId","data-v-805a59b4"]]);var y=f},46484:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(9274);const o={key:0},s={class:"precent-data"},n={class:"ml-10 percentage"},c={class:"precent-data"},i={class:"ml-10 percentage"};function l(e,t,r,l,u,d){const m=(0,a.resolveComponent)("ConsumptionGauge");return(0,a.openBlock)(),(0,a.createElementBlock)("div",null,[r.showAllocated?((0,a.openBlock)(),(0,a.createElementBlock)("div",o,[(0,a.createVNode)(m,{capacity:d.storageStats.total,used:d.storageStats.scheduled,units:d.allocatedUnits,"number-formatter":d.formatter,"resource-name":r.resourceName},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("harvester.dashboard.hardwareResourceGauge.allocated")),1),(0,a.createElementVNode)("span",s,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.allocatedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",n," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name"])])):(0,a.createCommentVNode)("",!0),(0,a.createVNode)(m,{capacity:d.storageStats.maximum,used:d.storageStats.used,units:d.usedUnits,"number-formatter":d.formatter,"resource-name":r.showAllocated?"":r.resourceName,class:(0,a.normalizeClass)({"mt-10":r.showAllocated})},{title:(0,a.withCtx)((({formattedPercentage:t})=>[(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.used")),1),(0,a.createElementVNode)("span",c,[(0,a.createTextVNode)((0,a.toDisplayString)(e.t("node.detail.glance.consumptionGauge.amount",d.usedAmountTemplateValues))+" ",1),(0,a.createElementVNode)("span",i," / "+(0,a.toDisplayString)(t),1)])])),_:1},8,["capacity","used","units","number-formatter","resource-name","class"])])}var u=r(95912),d=r(20665),m=r(49844),p=r(84757),h={name:"HarvesterStorageUsed",components:{ConsumptionGauge:u.A},props:{value:{type:String,default:""},row:{type:Object,required:!0},resourceName:{type:String,default:""},showAllocated:{type:Boolean,default:!1}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.longhornSettings=await this.$store.dispatch(`${e}/findAll`,{type:d.oe.SETTINGS})},data(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](d.oe.SETTINGS)||[];return{longhornSettings:t}},computed:{storageStats(){const e={used:0,scheduled:0,maximum:0,reserved:0,total:0},t=this.$store.getters["currentProduct"].inStore,r=this.$store.getters[`${t}/byId`](d.oe.NODES,`longhorn-system/${this.row.id}`)||{},a=this.longhornSettings.find((e=>"longhorn-system/storage-over-provisioning-percentage"===e.id)),o=r?.spec?.disks||{},s=r?.status?.diskStatus||{};return e.used+=r?.spec?.allowScheduling?r.used:0,Object.keys(o).map((t=>{e.scheduled+=r?.spec?.allowScheduling&&s[t]?.storageScheduled||0,e.reserved+=o[t]?.storageReserved||0})),Object.values(s).map((t=>{e.maximum+=t?.storageMaximum||0})),e.total=(e.maximum-e.reserved)*Number(a?.value??0)/100,e},allocatedUnits(){const e=(0,m.$W)(this.storageStats.total,1024);return`${m.QN[e]}${p.jx}`},usedUnits(){const e=(0,m.$W)(this.storageStats.maximum,1024);return`${m.QN[e]}${p.jx}`},formatUsed(){let e=this.formatter(this.storageStats.used);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.used,{canRoundToZero:!0})),e},formatAllocated(){let e=this.formatter(this.storageStats.scheduled);return!Number.parseFloat(e)>0&&(e=this.formatter(this.storageStats.scheduled,{canRoundToZero:!0})),e},usedAmountTemplateValues(){return{used:this.formatUsed,total:this.formatter(this.storageStats.maximum),unit:this.usedUnits}},allocatedAmountTemplateValues(){return{used:this.formatAllocated,total:this.formatter(this.storageStats.total),unit:this.allocatedUnits}}},methods:{formatter(e,t){const r=(0,m.$W)(this.storageStats.maximum,1024),a={addSuffix:!1,increment:1024,minExponent:r};return(0,m.Mo)(e,{...a,...t})}}},g=(r(93529),r(47433));const f=(0,g.A)(h,[["render",l],["__scopeId","data-v-07e1839c"]]);var y=f},67866:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".copy-to-clipboard-text[data-v-bed9eff4]{white-space:nowrap}.copy-to-clipboard-text.plain[data-v-bed9eff4]{color:var(--body-text)}.copy-to-clipboard-text.plain[data-v-bed9eff4]:hover{text-decoration:none}.copy-to-clipboard-text.copied[data-v-bed9eff4]{pointer-events:none;color:var(--success)}",""]),t["default"]=c},61678:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-6c8e8046]{white-space:nowrap}",""]),t["default"]=c},20293:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-805a59b4]{white-space:nowrap}",""]),t["default"]=c},13465:function(e,t,r){"use strict";r.r(t);var a=r(36758),o=r.n(a),s=r(40935),n=r.n(s),c=n()(o());c.push([e.id,".precent-data[data-v-07e1839c]{white-space:nowrap}",""]),t["default"]=c},98586:function(e,t,r){var a=r(67866);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("5e0d6630",a,!0,{sourceMap:!1,shadowMode:!1})},96782:function(e,t,r){var a=r(61678);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("912be7e2",a,!0,{sourceMap:!1,shadowMode:!1})},93829:function(e,t,r){var a=r(20293);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("4c11d0fd",a,!0,{sourceMap:!1,shadowMode:!1})},93529:function(e,t,r){var a=r(13465);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var o=r(74825).A;o("0bcf6453",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.5.0-rc5.umd.min.876.js.map